(function (factory) {
  typeof define === 'function' && define.amd ? define(factory) :
  factory();
})((function () { 'use strict';

  new Vue({
    el: '#app',
    data: {
      username: '',
      password: '',
      message: '密码长度6位以上',
      errorFeedback: false,
      disable: false
    },
    methods: {
      signin: function signin() {
        var _this = this;

        this.disable = true;

        if (this.username === '' || this.password.lenght < 6) {
          this.errorFeedback = true;
          this.disable = false;
          return;
        } else {
          this.errorFeedback = false;
          fetch('/api/signin', {
            method: 'POST',
            headers: {
              Accept: 'application/json',
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              username: this.username,
              password: this.password
            })
          }).then(function (res) {
            return res.json();
          }).then(function (data) {
            _this.errorFeedback = false;
            _this.message = data.message;
          });
        }
      }
    }
  });

}));
